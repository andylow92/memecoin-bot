

## Key Features

1. **Multiple Price Conditions**
   - Supports both "above" and "below" price triggers.
   - Monitor multiple conditions simultaneously.
   - Flexible alert configurations.

2. **Enhanced Market Data**
   - Tracks 24-hour price changes and volume.
   - Includes detailed market information in alerts.

3. **Configuration Management**
   - Supports JSON configuration files.
   - Utilizes environment variables with fallback values.

4. **Improved Logging**
   - Logs to both console and file.
   - Provides detailed error messages and formatted data.

5. **Graceful Shutdown**
   - Signal handlers for `SIGINT` and `SIGTERM`.
   - Ensures a clean shutdown process.

6. **Error Handling**
   - Handles API errors and network timeouts.
   - Validates sound file existence.

7. **Type Hints**
   - Added for better code maintainability and debugging.

---

## Installation and Setup

### 1. Clone the Repository
```bash
git clone https://github.com/yourusername/crypto-alert-bot.git
cd crypto-alert-bot
```

### 2. Create a Virtual Environment
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Install Dependencies
Create a `requirements.txt` file:
```text
requests
```

Install the libraries:
```bash
pip install -r requirements.txt
```

---

## Setting Up Gmail for Email Alerts

The bot supports sending email alerts through Gmail. Follow these steps to configure Gmail:

### **1. Create a Gmail Account (Optional)**
- If you donâ€™t already have a dedicated Gmail account for the bot, [create one here](https://mail.google.com/).

### **2. Enable Gmail SMTP Access**
Gmail requires special configurations to allow external apps to send emails.

#### **Option 1: Use App Passwords (Recommended)**
1. Enable **2-Step Verification** in your Google Account.
   - Go to [Google Account Security](https://myaccount.google.com/security).
   - Enable **2-Step Verification**.

2. Generate an **App Password**:
   - Go to [App Passwords](https://myaccount.google.com/apppasswords).
   - Select **Mail** as the app and **Other** as the device name (e.g., "Crypto Alert Bot").
   - Copy the generated password. You'll use this in the bot configuration.

#### **Option 2: Allow Less Secure Apps (Not Recommended)**
1. Go to [Google Account Security](https://myaccount.google.com/security).
2. Enable **Less Secure App Access**.

---

### 3. Configure Environment Variables
Set the following environment variables in your terminal:
```bash
export SENDER_EMAIL="your_email@gmail.com"
export SENDER_PASSWORD="your_app_password"  # App Password or Gmail password
export RECEIVER_EMAIL="receiver_email@example.com"
```

Alternatively, you can edit the `crypto_config.json` file generated by the bot to include your credentials.

---

## Running the `test.py` Script

To ensure the email setup is correct, create and run a test script (`test.py`) with the following content:

```python
import smtplib
from email.mime.text import MIMEText

# Email credentials
sender_email = "your_email@gmail.com"
receiver_email = "receiver_email@example.com"
password = "your_app_password"

# Email content
subject = "Test Email from Crypto Bot"
body = "This is a test email to verify the bot's email functionality."
msg = MIMEText(body)
msg["Subject"] = subject
msg["From"] = sender_email
msg["To"] = receiver_email

# Send email
try:
    with smtplib.SMTP_SSL("smtp.gmail.com", 465) as server:
        server.login(sender_email, password)
        server.send_message(msg)
    print("Test email sent successfully!")
except Exception as e:
    print(f"Error sending email: {e}")
```

### Steps to Run:
1. Save the script as `test.py` in the project directory.
2. Run the script:
   ```bash
   python test.py
   ```
3. Check your inbox (`receiver_email`) for the test email.

---

## How to Use the Bot

### Basic Usage
```python
from crypto_alert_bot import CryptoAlertBot, PriceCondition

bot = CryptoAlertBot(
    coin_id="pepe",
    conditions=PriceCondition(0.000001, "above"),
    alert_types="sound"
)
bot.start_monitoring()
```

### Advanced Usage
```python
from crypto_alert_bot import CryptoAlertBot, PriceCondition

conditions = [
    PriceCondition(0.000001, "above"),
    PriceCondition(0.0000005, "below")
]

bot = CryptoAlertBot(
    coin_id="pepe",
    conditions=conditions,
    alert_types=["sound", "email"],
    cooldown_period=300,
    check_interval=60
)
bot.start_monitoring()
```

---

## Improvements in This Version

1. **Multiple Conditions:** Monitor both "above" and "below" price triggers.
2. **Market Data:** Includes 24-hour volume and price change percentage.
3. **Config Management:** Easier settings management via JSON files and environment variables.
4. **Robust Logging:** Logs to console and a `crypto_alert.log` file.
5. **Graceful Shutdown:** Handles `CTRL+C` interruptions and system shutdown signals.
6. **Error Handling:** Handles API, sound file, and network issues gracefully.
7. **Type Hints:** Improves readability and debugging.

---

## Logging
All logs are saved to `crypto_alert.log` in the script's directory.

---

## Requirements
- Python 3.7+
- Internet connection for API access.
- Gmail account for email alerts (or other SMTP-compatible service).

---

## Contributing
Feel free to fork this repository and submit pull requests for additional features or improvements!

---

## License
This project is licensed under the MIT License. See the `LICENSE` file for details.
```

This updated `README.md` includes the Gmail setup instructions and details on running `test.py` for testing email functionality. Let me know if you need further refinements!